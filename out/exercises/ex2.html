<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/cmput412-akhadeli/_next/static/media/a34f9d1faa5f3315-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/pub-sub-simple.png"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/annotated-image.png"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/straight_plot.png"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/rotation_plot.png"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/D_plot.png"/><link rel="preload" as="image" href="/cmput412-akhadeli/images/ex2/exec-time.png"/><link rel="stylesheet" href="/cmput412-akhadeli/_next/static/css/031f1ae1e4bdb419.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/cmput412-akhadeli/_next/static/chunks/webpack-99d0ae35d6aae624.js"/><script src="/cmput412-akhadeli/_next/static/chunks/4bd1b696-9924fae48e609361.js" async=""></script><script src="/cmput412-akhadeli/_next/static/chunks/517-88af3900d71f33ad.js" async=""></script><script src="/cmput412-akhadeli/_next/static/chunks/main-app-8535f9fd3beb3af1.js" async=""></script><script src="/cmput412-akhadeli/_next/static/chunks/173-7be02dd55462ff0c.js" async=""></script><script src="/cmput412-akhadeli/_next/static/chunks/678-9555f6ed956a8d40.js" async=""></script><script src="/cmput412-akhadeli/_next/static/chunks/app/layout-b4cd070372f0fd3c.js" async=""></script><meta name="next-size-adjust" content=""/><title>CMPUT 412/503 - Abdullah Khadeli</title><meta name="description" content="A documentation site for CMPUT 412/503 - Abdullah Khadeli"/><link rel="icon" href="/cmput412-akhadeli/favicon.ico" type="image/x-icon" sizes="16x16"/><script src="/cmput412-akhadeli/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="__className_23f766 antialiased dark"><div style="--sidebar-width:16rem;--sidebar-width-icon:3rem" class="group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar"><div class="group peer hidden text-sidebar-foreground md:block" data-state="expanded" data-collapsible="" data-variant="sidebar" data-side="left"><div class="relative h-svh w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear group-data-[collapsible=offcanvas]:w-0 group-data-[side=right]:rotate-180 group-data-[collapsible=icon]:w-[--sidebar-width-icon]"></div><div class="fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)] group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l"><div data-sidebar="sidebar" class="flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow"><div data-sidebar="header" class="flex flex-col gap-2 p-2"><ul data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1"><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="lg" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-12 text-sm group-data-[collapsible=icon]:!p-0" href="/cmput412-akhadeli"><div class="bg-primary text-primary-foreground flex aspect-square size-8 items-center justify-center rounded-lg"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gallery-vertical-end size-4"><path d="M7 2h10"></path><path d="M5 6h14"></path><rect width="18" height="12" x="3" y="10" rx="2"></rect></svg></div><div class="flex flex-col gap-0.5 leading-none"><span class="font-semibold">CMPUT 412 - akhadeli</span><span class="">v1.0.0</span></div></a></li></ul></div><div data-sidebar="content" class="flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden"><div data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-sidebar="group-label" class="flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0">Navigation</div><ul data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1"><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-8 text-sm" href="/cmput412-akhadeli"><span>Home</span></a></li><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-8 text-sm" href="https://github.com/akhadeli/cmput412-akhadeli-code"><span>Repository</span></a></li><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-8 text-sm" href="/cmput412-akhadeli/contact"><span>Contact</span></a></li></ul></div><div data-sidebar="group" class="relative flex w-full min-w-0 flex-col p-2"><div data-sidebar="group-label" class="flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] duration-200 ease-linear focus-visible:ring-2 [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0">Exercises</div><ul data-sidebar="menu" class="flex w-full min-w-0 flex-col gap-1"><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-8 text-sm" href="/cmput412-akhadeli/exercises/ex1"><span>Exercise 1</span></a></li><li data-sidebar="menu-item" class="group/menu-item relative"><a data-sidebar="menu-button" data-size="default" data-active="false" class="peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&amp;&gt;span:last-child]:truncate [&amp;&gt;svg]:size-4 [&amp;&gt;svg]:shrink-0 hover:bg-sidebar-accent hover:text-sidebar-accent-foreground h-8 text-sm" href="/cmput412-akhadeli/exercises/ex2"><span>Exercise 2</span></a></li></ul></div></div></div></div></div><button class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 hover:bg-accent hover:text-accent-foreground h-7 w-7 ml-3 mt-3" data-sidebar="trigger"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-panel-left"><rect width="18" height="18" x="3" y="3" rx="2"></rect><path d="M9 3v18"></path></svg><span class="sr-only">Toggle Sidebar</span></button><main class="flex-1 overflow-auto p-8 pt-16"><main class="mx-auto max-w-3xl"><div class="prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-black prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg dark:prose-headings:text-white prose-md prose-p:text-lg prose-p:leading-relaxed prose-p:text-gray-800 dark:prose-p:text-gray-100 prose-table:w-full prose-table:border-collapse prose-table:border-gray-300 prose-table:dark:border-gray-600 prose-table:text-left prose-table:text-sm prose-table:text-gray-800 dark:prose-table:text-gray-100 prose-ul:text-gray-800 dark:prose-ul:text-gray-100 prose-li:text-gray-800 dark:prose-li:text-gray-100 prose-strong:text-gray-800 prose-strong:font-bold dark:prose-strong:text-gray-100 prose-img:w-full prose-img:rounded-lg prose-img:border prose-img:border-border prose-img:dark:border-border prose-video:w-full prose-video:rounded-lg prose-video:border prose-video:border-border prose-video:dark:border-border prose-iframe:w-full prose-iframe:rounded-lg prose-iframe:border prose-iframe:border-border prose-iframe:dark:border-border"><h1>CMPUT 412/503 - Exercise 2 Report</h1>
<h2>Abdullah Khadeli and Ryan Rom</h2>
<h3>Part I: Getting comfortable with ROS</h3>
<ul>
<li>
<p><strong>Node</strong>: An executable file within a ROS package. Each node should be built to perform specific tasks like controlling sensors or motors, and communicating with other nodes by publishing and subscribing to topics.</p>
</li>
<li>
<p><strong>Topic</strong>: Topics are a way to exchange mnessages betwee nodes by using a pubsub model. Publishers send messages to topics, while subscribers receive them, allowing for decoupled communication.</p>
</li>
<li>
<p><strong>Service</strong>: Services provide an alternative communication mechanism between nodes. Unlike the asynchronous nature of topics, services are for operations requiring a request-response interaction, like querying sensor states.</p>
</li>
<li>
<p><strong>Message</strong>: Messages provide typed data schemas for node communication. They provide support for different types of data exchanged between nodes.</p>
</li>
<li>
<p><strong>Bag</strong>: A method to record messages sent through a topic. Since timestamps are attached to each message, it allows for the playback of the messages in the order they were sent, and thus analysis of the time-series data.</p>
</li>
</ul>
<h4>Typical workflow for communication</h4>
<p>The typical workflow for setting up node communication involves:</p>
<ol>
<li>Creating your nodes</li>
<li>Defining message schemas using the built-in message types</li>
<li>Attaching publishers and subscribers to the appropriate topics</li>
<li>Launching the respective nodes</li>
<li>Additionally collect data using rosbag for playback and analysis</li>
</ol>
<p><img src="/cmput412-akhadeli/images/ex2/pub-sub-simple.png" alt="Publisher and Subscriber"/></p>
<p><img src="/cmput412-akhadeli/images/ex2/annotated-image.png" alt="Annotated Image"/></p>
<h3>Part II: Odometry using wheel encoders</h3>
<h4>Straight line task</h4>
<ul>
<li>Why is there a difference between the actual and desired location?</li>
</ul>
<video src="/cmput412-akhadeli/images/ex2/straight.mp4" controls=""></video>
<p>Most of the time the bot stops near exact distance (1.25m) but sometimes it goes way over it.
We suspect one reason for this is because of lag.
A discrepancy of the connection between the messages that the publisher is sending to the robot.
The robot gets the shutdown signal late which includes:</p>
<pre><code>WheelsCMDStamped(vel_left=0, vel_right=0)
</code></pre>
<p>Another reason is the rate of messages publishing.
We observed that when the rate of message publishing is too low (E.g. 3 messages per second) it is more likely to overshoot.
This is because the interval of message sending is large which allows for larger error.</p>
<p>Furthermore, the uneven surface of the mat leads to drift into one direction.</p>
<ul>
<li>What speed did you use?</li>
</ul>
<p>The duckiebot is set to full throttle to compensate for the unevenness of the surface</p>
<ul>
<li>What happens when you increase or decrease the speed?</li>
</ul>
<p>Increasing the speed leads to more accurate results in our case.
This is likely because the mat used for the robot has been tampered a lot over 2 weeks as other students use it for their testing and a lot of accidental stepping on mat has happened.
Decreasing the speed leads to less accurate results like for the same reason expressed previously.</p>
<p><img src="/cmput412-akhadeli/images/ex2/straight_plot.png" alt="Straight Plot"/></p>
<h4>Rotation task</h4>
<ul>
<li>Did you observe any deviations in the rotation?</li>
<li>If deviations exist, what could be the cause?</li>
</ul>
<video src="/cmput412-akhadeli/images/ex2/rotation.mp4" controls=""></video>
<p>One of the most pressing problems we faced in the rotation task is overshooting.
After spending a long time tweaking our implementation, we achieved near exact 90 degree rotation in most of our runs.
However, sometimes it overshoots and, rarely, its spins around more than 360 degrees.
It mainly came from the lag and number of published messages per second.
There was nothing we can do about the former. For the latter, we set a tolerance threshold such that when the read that total change in angle of the robot frame is within that lower threshold we stop the robot.
As well, we increased the number of published messages per second. This makes the interval of error really small so it only overshoots a little if we ever do and there is no lag.</p>
<ul>
<li>Does your program exit properly after you finish all the above tasks? Is it still running
even if you shut down the program? If this is the case, think about how to resolve this
issue</li>
</ul>
<p>Our programs did not finish properly in the beginning.
When we shutdown our program for the first time, the robot&#x27;s wheels kept spinning even though the run function already finished.
We, however, quickly realized this after looking at the sample exercises (E.g. camera reader).
We defined an on_shutdown() callback to our node that publishes a command to the wheels of the robot that set the velocity of each wheel to 0.
After we defined this in our DTROS subclasses, our nodes shutdown properly.</p>
<p><img src="/cmput412-akhadeli/images/ex2/rotation_plot.png" alt="Rotation Plot"/></p>
<h3>Part III: Playing with Duckiebots</h3>
<ul>
<li>Clearly document the mapping of states to LED colors in your report</li>
</ul>
<video src="/cmput412-akhadeli/images/ex2/d-path-compressed.mp4" controls=""></video>
<p><strong>Red</strong> means the duckiebot is in a <strong>stopped state</strong> and <strong>Green</strong> means that the duckiebot is <strong>moving</strong>.
When the node shuts down, we turn the lights off.</p>
<ul>
<li>Include plot of the rosbag results</li>
</ul>
<p><img src="/cmput412-akhadeli/images/ex2/D_plot.png" alt="D Path Plot"/></p>
<ul>
<li>Print the total execution time for the task and add it in the report.</li>
</ul>
<p><img src="/cmput412-akhadeli/images/ex2/exec-time.png" alt="Total Execution Time"/></p>
<ul>
<li>
<p>Is your duckiebot able to track what you planned according to your plan? If not,
then why?</p>
<p>Accumulation of small errors leading to big errors in the long run (E.g. minor deviation from the first straight line task in the D path tracing leads to the robot not reaching the end position)
It is also very hard to get accurate movement from the robot because of the reasons stated in the previous parts.</p>
</li>
</ul></div></main></main></div><script src="/cmput412-akhadeli/_next/static/chunks/webpack-99d0ae35d6aae624.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[2034,[\"173\",\"static/chunks/173-7be02dd55462ff0c.js\",\"678\",\"static/chunks/678-9555f6ed956a8d40.js\",\"177\",\"static/chunks/app/layout-b4cd070372f0fd3c.js\"],\"SidebarProvider\"]\n3:I[1543,[\"173\",\"static/chunks/173-7be02dd55462ff0c.js\",\"678\",\"static/chunks/678-9555f6ed956a8d40.js\",\"177\",\"static/chunks/app/layout-b4cd070372f0fd3c.js\"],\"AppSidebar\"]\n4:I[2034,[\"173\",\"static/chunks/173-7be02dd55462ff0c.js\",\"678\",\"static/chunks/678-9555f6ed956a8d40.js\",\"177\",\"static/chunks/app/layout-b4cd070372f0fd3c.js\"],\"SidebarTrigger\"]\n5:I[5244,[],\"\"]\n6:I[3866,[],\"\"]\n8:I[6213,[],\"OutletBoundary\"]\na:I[6213,[],\"MetadataBoundary\"]\nc:I[6213,[],\"ViewportBoundary\"]\ne:I[4835,[],\"\"]\n:HL[\"/cmput412-akhadeli/_next/static/media/a34f9d1faa5f3315-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n:HL[\"/cmput412-akhadeli/_next/static/css/031f1ae1e4bdb419.css\",\"style\"]\n7:T41f,prose prose-headings:mt-8 prose-headings:font-semibold prose-headings:text-black prose-h1:text-5xl prose-h2:text-4xl prose-h3:text-3xl prose-h4:text-2xl prose-h5:text-xl prose-h6:text-lg dark:prose-headings:text-white prose-md prose-p:text-lg prose-p:leading-relaxed prose-p:text-gray-800 dark:prose-p:text-gray-100 prose-table:w-full prose-table:border-collapse prose-table:border-gray-300 prose-table:dark:border-gray-600 prose-table:text-left prose-table:text-sm prose-table:text-gray-800 dark:prose-table:text-gray-100 prose-ul:text-gray-800 dark:prose-ul:text-gray-100 prose-li:text-gray-800 dark:prose-li:text-gray-100 prose-strong:text-gray-800 prose-strong:font-bold dark:prose-strong:text-gray-100 prose-img:w-full prose-img:rounded-lg prose-img:border prose-img:border-border prose-img:dark:border-border prose-video:w-full prose-video:rounded-lg prose-video:border prose-video:border-border prose-video:dark:border-border prose-iframe:w-full prose-iframe:rounded-lg prose-iframe:border prose-iframe:border-border prose-iframe:dark:border-border"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"BCtaJLCJWIv_CkVTVRH1p\",\"p\":\"/cmput412-akhadeli\",\"c\":[\"\",\"exercises\",\"ex2\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"exercises\",{\"children\":[\"ex2\",{\"children\":[\"__PAGE__\",{}]}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/cmput412-akhadeli/_next/static/css/031f1ae1e4bdb419.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"suppressHydrationWarning\":true,\"children\":[\"$\",\"body\",null,{\"className\":\"__className_23f766 antialiased dark\",\"children\":[\"$\",\"$L2\",null,{\"children\":[[\"$\",\"$L3\",null,{}],[\"$\",\"$L4\",null,{\"className\":\"ml-3 mt-3\"}],[\"$\",\"main\",null,{\"className\":\"flex-1 overflow-auto p-8 pt-16\",\"children\":[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[],[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}]]}]}]}]]}],{\"children\":[\"exercises\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"exercises\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"ex2\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"exercises\",\"children\",\"ex2\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L6\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"main\",null,{\"className\":\"mx-auto max-w-3xl\",\"children\":[\"$\",\"div\",null,{\"className\":\"$7\",\"children\":[[\"$\",\"h1\",null,{\"children\":\"CMPUT 412/503 - Exercise 2 Report\"}],\"\\n\",[\"$\",\"h2\",null,{\"children\":\"Abdullah Khadeli and Ryan Rom\"}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Part I: Getting comfortable with ROS\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Node\"}],\": An executable file within a ROS package. Each node should be built to perform specific tasks like controlling sensors or motors, and communicating with other nodes by publishing and subscribing to topics.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Topic\"}],\": Topics are a way to exchange mnessages betwee nodes by using a pubsub model. Publishers send messages to topics, while subscribers receive them, allowing for decoupled communication.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Service\"}],\": Services provide an alternative communication mechanism between nodes. Unlike the asynchronous nature of topics, services are for operations requiring a request-response interaction, like querying sensor states.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Message\"}],\": Messages provide typed data schemas for node communication. They provide support for different types of data exchanged between nodes.\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Bag\"}],\": A method to record messages sent through a topic. Since timestamps are attached to each message, it allows for the playback of the messages in the order they were sent, and thus analysis of the time-series data.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Typical workflow for communication\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The typical workflow for setting up node communication involves:\"}],\"\\n\",[\"$\",\"ol\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Creating your nodes\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Defining message schemas using the built-in message types\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Attaching publishers and subscribers to the appropriate topics\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Launching the respective nodes\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"Additionally collect data using rosbag for playback and analysis\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/pub-sub-simple.png\",\"alt\":\"Publisher and Subscriber\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/annotated-image.png\",\"alt\":\"Annotated Image\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Part II: Odometry using wheel encoders\"}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Straight line task\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Why is there a difference between the actual and desired location?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/straight.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Most of the time the bot stops near exact distance (1.25m) but sometimes it goes way over it.\\nWe suspect one reason for this is because of lag.\\nA discrepancy of the connection between the messages that the publisher is sending to the robot.\\nThe robot gets the shutdown signal late which includes:\"}],\"\\n\",[\"$\",\"pre\",null,{\"children\":[\"$\",\"code\",null,{\"children\":\"WheelsCMDStamped(vel_left=0, vel_right=0)\\n\"}]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Another reason is the rate of messages publishing.\\nWe observed that when the rate of message publishing is too low (E.g. 3 messages per second) it is more likely to overshoot.\\nThis is because the interval of message sending is large which allows for larger error.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Furthermore, the uneven surface of the mat leads to drift into one direction.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"What speed did you use?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"The duckiebot is set to full throttle to compensate for the unevenness of the surface\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"What happens when you increase or decrease the speed?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Increasing the speed leads to more accurate results in our case.\\nThis is likely because the mat used for the robot has been tampered a lot over 2 weeks as other students use it for their testing and a lot of accidental stepping on mat has happened.\\nDecreasing the speed leads to less accurate results like for the same reason expressed previously.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/straight_plot.png\",\"alt\":\"Straight Plot\"}]}],\"\\n\",[\"$\",\"h4\",null,{\"children\":\"Rotation task\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Did you observe any deviations in the rotation?\"}],\"\\n\",[\"$\",\"li\",null,{\"children\":\"If deviations exist, what could be the cause?\"}],\"\\n\"]}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/rotation.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"One of the most pressing problems we faced in the rotation task is overshooting.\\nAfter spending a long time tweaking our implementation, we achieved near exact 90 degree rotation in most of our runs.\\nHowever, sometimes it overshoots and, rarely, its spins around more than 360 degrees.\\nIt mainly came from the lag and number of published messages per second.\\nThere was nothing we can do about the former. For the latter, we set a tolerance threshold such that when the read that total change in angle of the robot frame is within that lower threshold we stop the robot.\\nAs well, we increased the number of published messages per second. This makes the interval of error really small so it only overshoots a little if we ever do and there is no lag.\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Does your program exit properly after you finish all the above tasks? Is it still running\\neven if you shut down the program? If this is the case, think about how to resolve this\\nissue\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Our programs did not finish properly in the beginning.\\nWhen we shutdown our program for the first time, the robot's wheels kept spinning even though the run function already finished.\\nWe, however, quickly realized this after looking at the sample exercises (E.g. camera reader).\\nWe defined an on_shutdown() callback to our node that publishes a command to the wheels of the robot that set the velocity of each wheel to 0.\\nAfter we defined this in our DTROS subclasses, our nodes shutdown properly.\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/rotation_plot.png\",\"alt\":\"Rotation Plot\"}]}],\"\\n\",[\"$\",\"h3\",null,{\"children\":\"Part III: Playing with Duckiebots\"}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Clearly document the mapping of states to LED colors in your report\"}],\"\\n\"]}],\"\\n\",[\"$\",\"video\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/d-path-compressed.mp4\",\"controls\":true}],\"\\n\",[\"$\",\"p\",null,{\"children\":[[\"$\",\"strong\",null,{\"children\":\"Red\"}],\" means the duckiebot is in a \",[\"$\",\"strong\",null,{\"children\":\"stopped state\"}],\" and \",[\"$\",\"strong\",null,{\"children\":\"Green\"}],\" means that the duckiebot is \",[\"$\",\"strong\",null,{\"children\":\"moving\"}],\".\\nWhen the node shuts down, we turn the lights off.\"]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Include plot of the rosbag results\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/D_plot.png\",\"alt\":\"D Path Plot\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":\"Print the total execution time for the task and add it in the report.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",null,{\"children\":[\"$\",\"img\",null,{\"src\":\"/cmput412-akhadeli/images/ex2/exec-time.png\",\"alt\":\"Total Execution Time\"}]}],\"\\n\",[\"$\",\"ul\",null,{\"children\":[\"\\n\",[\"$\",\"li\",null,{\"children\":[\"\\n\",[\"$\",\"p\",null,{\"children\":\"Is your duckiebot able to track what you planned according to your plan? If not,\\nthen why?\"}],\"\\n\",[\"$\",\"p\",null,{\"children\":\"Accumulation of small errors leading to big errors in the long run (E.g. minor deviation from the first straight line task in the D path tracing leads to the robot not reaching the end position)\\nIt is also very hard to get accurate movement from the robot because of the reasons stated in the previous parts.\"}],\"\\n\"]}],\"\\n\"]}]]}]}],null,[\"$\",\"$L8\",null,{\"children\":\"$L9\"}]]}],{},null,false]},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[\"$\",\"$1\",\"bkB6yxOyjrGKiOfhJbDhA\",{\"children\":[[\"$\",\"$La\",null,{\"children\":\"$Lb\"}],[\"$\",\"$Lc\",null,{\"children\":\"$Ld\"}],[\"$\",\"meta\",null,{\"name\":\"next-size-adjust\",\"content\":\"\"}]]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$e\",\"$undefined\"],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"d:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"1\",{\"children\":\"CMPUT 412/503 - Abdullah Khadeli\"}],[\"$\",\"meta\",\"2\",{\"name\":\"description\",\"content\":\"A documentation site for CMPUT 412/503 - Abdullah Khadeli\"}],[\"$\",\"link\",\"3\",{\"rel\":\"icon\",\"href\":\"/cmput412-akhadeli/favicon.ico\",\"type\":\"image/x-icon\",\"sizes\":\"16x16\"}]]\n"])</script><script>self.__next_f.push([1,"9:null\n"])</script></body></html>